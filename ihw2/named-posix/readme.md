# Отчёт для программы: 6-7 баллов. Множество процессов взаимодействуют с использованием именованных POSIX семафоров.

## Код программы

Файл программы - [main.cpp](main.cpp)

## Описание входных данных

В терминале пользователю предлагается ввести энергию Ций каждого из бойцов, после чего начинается соревнование

## Описание алгоритма работы программы

- В функции main() именованный семафор создается с помощью sem_open() с именем /fighter_semaphore. Семафор инициализируется значением 0, что означает, что изначально нет доступа к общим ресурсам.
- Семафор используется для синхронизации потоков во время симуляции боев.
- Каждый поток боя ожидает сигнала от других потоков о завершении боя с помощью sem_wait().
- После завершения боя каждый поток отправляет сигнал другим потокам о том, что бой завершен, с помощью sem_post().
- Функция finalFight() также использует семафор для ожидания завершения боя между победителями первых трех боев.
  
## Описание кода программы

Каждый поток боя вызывает sem_wait(), чтобы ожидать сигнала от других потоков о завершении боя. После завершения боя каждый поток вызывает sem_post(), чтобы сигнализировать о том, что бой завершен.
```cpp
// Ожидание завершения боя
for (int i = 0; i < 3; ++i) {
    sem_wait(semaphore);
}

// Отправка сигнала о завершении боя
sem_post(semaphore);
```

После завершения всех операций с семафором он закрывается и удаляется с помощью sem_close() и sem_unlink().
```cpp
// Закрытие семафора
sem_close(semaphore);
// Удаление семафора
sem_unlink(SEMAPHORE_NAME);
```

Определение победителя соревнований и вывод итоговый силы победившего бойца
```cpp
int winner_strength = -1;
for (const auto& fighter : fighters) {
    if (!fighter.defeated) {
        winner_strength = fighter.strength;
        break;
    }
}
if (winner_strength != -1) {
    std::cout << "Сила победителя соревнования: " << winner_strength << std::endl;
} else {
    std::cout << "Все бойцы были побеждены." << std::endl;
}
```

## Пример выполнения программы

![Снимок экрана 2024-04-19 в 13 36 35](https://github.com/flowykk/operating-sys-hse/assets/71427624/99929d48-4296-4cef-be19-a3e2fc217532)
